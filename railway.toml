[build]
builder = "nixpacks"

[build.nixpacksPlan.phases.setup]
# Specify only one Node.js version here (e.g., nodejs_20)
nixPkgs = ["nodejs_20"]

[build.nixpacksPlan.phases.install]
cmds = ["npm install", "npm ci"]

[build.nixpacksPlan.phases.build]
cmds = ["npm run build --if-present"]

[build.nixpacksPlan.phases.test]
cmds = ["npm test"]

[deploy]
startCommand = "npm start"
